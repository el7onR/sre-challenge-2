{% extends 'layout.html' %}

{% block content %}
        <div class="content">
            <h2 class="content-subhead">Cadastro de Usuários</h2>
            <form class="pure-form" method="POST" action="/users">
                <fieldset>
                    <input type="text" placeholder="Nome Completo" name="full_name" />
                    <input type="text" placeholder="Username" name="username"/>
                    <input type="email" placeholder="Email" name="email" />
                </fieldset>
                <button type="submit" class="pure-button pure-button-primary">Criar</button>
            </form>
            {% if new_user is not none %}
                {% if new_user.status_code != 201 %}
                    <p>Erro ao criar usuário, detalhes {{ new_user.content }}</p>
                {% endif %} 
                {% if new_user.status_code != 201 %}
                    <p>Erro ao criar usuário, detalhes {{ new_user.content }}</p>
                {% endif %} 
            {% endif %}
        </div>
        <div class="content">            
            <h2 class="content-subhead">Lista Usuários Cadastrados</h2>
            {% if users is not none %}
                {% if users.status_code != 200 %}
                    <p>Nenhum usuário encontrado</p>
                {% endif %}
                {% if users.status_code == 200 %}
                    {% for user in users.content %}
                        <table class="pure-table">
                            <thead>
                                <tr pure-table-odd>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Nome</th>
                                    <th>Ação</th>
                                </tr>
                            </thead>
                                <tbody>
                                    <tr class="pure-table-odd">
                                        <td>{{ user.id }}</td>
                                        <td>{{ user.username }}</td>
                                        <td>{{ user.full_name }}</td>
                                        <td>
                                            <form class="pure-form" method="POST" action="{{ url_for('users_bp.delete_user') }}" rel="nofollow">
                                                <input type="hidden" name="id" value="{{ user.id }}">
                                                <button type="submit" class="pure-button pure-button-primary">Excluir</button>
                                            </form>
                                            <button class="pure-button pure-button-primary">Alterar</button>
                                        </td>
                                    </tr>
                                </tbody>
                        </table>
                    {% endfor %}
                {% endif %}
            {% endif %}
        </div>
{% endblock %}


